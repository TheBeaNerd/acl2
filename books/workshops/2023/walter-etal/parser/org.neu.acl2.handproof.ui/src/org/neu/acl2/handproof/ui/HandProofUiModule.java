/*
 * generated by Xtext 2.29.0
 */
package org.neu.acl2.handproof.ui;

import org.eclipse.jface.text.ITextHover;
import org.eclipse.ui.plugin.AbstractUIPlugin;
import org.eclipse.xtext.ui.editor.IXtextEditorCallback;
import org.eclipse.xtext.ui.editor.folding.IFoldingRegionProvider;
import org.eclipse.xtext.ui.editor.preferences.IPreferenceStoreInitializer;
import org.eclipse.xtext.ui.editor.validation.MarkerCreator;
import org.neu.acl2.handproof.ui.editor.HandProofEditorCallback;
import org.neu.acl2.handproof.ui.editor.hover.MyCompositeHover;
import org.neu.acl2.handproof.ui.folding.HandProofFoldingRegionProvider;
import org.neu.acl2.handproof.ui.validation.CheckerOutputStorage;
import org.neu.acl2.handproof.ui.validation.EclipseValidationPreferencesProvider;
import org.neu.acl2.handproof.ui.validation.MyMarkerCreator;
import org.neu.acl2.handproof.ui.validation.ValidationPreferenceAccess;
import org.neu.acl2.handproof.validation.IValidationPreferencesProvider;
import org.neu.acl2.handproof.ui.validation.EclipseValidationMessageHandler;
import org.neu.acl2.handproof.validation.IValidationMessageHandler;

import com.google.inject.Binder;
import com.google.inject.name.Names;

/**
 * Use this class to register components to be used within the Eclipse IDE.
 */
public class HandProofUiModule extends AbstractHandProofUiModule {

	public HandProofUiModule(AbstractUIPlugin plugin) {
		super(plugin);
	}
	
	// This disables the "Do you want to covert this project to an XText project"
	// dialog box.
	// Basically that popup appears if the project doesn't have the XText nature.
	// Projects without the XText nature don't get validation on save
	// See https://www.eclipse.org/forums/index.php/t/158018/ for more info
	@Override
	public Class<? extends IXtextEditorCallback> bindIXtextEditorCallback() {
		return IXtextEditorCallback.NullImpl.class;
	}
	
	@Override
	public Class<? extends ITextHover> bindITextHover() {
		return MyCompositeHover.class;
	}
	
	@Override
	public void configureIPreferenceStoreInitializer(Binder binder) {
		binder.bind(IPreferenceStoreInitializer.class).annotatedWith(Names.named("ValidationPreferenceStore")).to(ValidationPreferenceAccess.Initializer.class);
		super.configureIPreferenceStoreInitializer(binder);
	}
	
	@Override
	public void configure(Binder binder) {
		super.configure(binder);
		binder.bind(CheckerOutputStorage.class);
		binder.bind(MarkerCreator.class).to(MyMarkerCreator.class);
		binder.bind(IValidationPreferencesProvider.class).to(EclipseValidationPreferencesProvider.class);
		binder.bind(IValidationMessageHandler.class).to(EclipseValidationMessageHandler.class);
		binder.bind(IXtextEditorCallback.class).annotatedWith(Names.named("HandProofEditorCallback")).to(HandProofEditorCallback.class);
		binder.bind(IFoldingRegionProvider.class).to(HandProofFoldingRegionProvider.class);
	}
}
